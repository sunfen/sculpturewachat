<!--index.wxml-->
<component-topnav inner-title="记工统计" is-show-back="true" bind:goback="goback"></component-topnav>  

<page>
  <view class="container">
    <view class="content">
 
      <!-- tab -->
      <view class="swiper-tab">
          <view class="swiper-tab-item {{currentTab==0?'active':''}}" data-current="0" bindtap="clickTab">按项目查看</view>
    <view class="swiper-tab-item {{currentTab==1?'active':''}}" data-current="1" bindtap="clickTab">按人名查看</view>
      </view>
      
      <!-- 按项目查看 -->
      <view wx:if="{{currentTab == 0}}">
        <!-- table header -->
        <view class="table-header">
          <text>项目名称</text>
          <text>明细</text>
          <text>金额</text>
        </view>
        <!-- table body -->
        <scroll-view class="table-body">
         
          <view class="table-item-column" wx:for="{{results}}" wx:key="property" wx:for-item="item" wx:for-index="id"  data-index="{{id}}" bindlongtap='handleLongPress' bindtouchstart="touchstart" bindtouchmove="touchmove" >
              
              <view class="table-item-top">

                <view class="table-item-left">
                  <text>{{item.name}}</text>
                </view>
                
                <view class="table-item-center">
                  <text>上班: {{item.works}}</text>
                  <text>加班: {{item.extraWorks}}</text>
                </view>
                
                <view class="table-item-right">
                  <text>工资：{{item.expectTotalWages}}元</text>
                  <text>已结算：{{item.actualTotalWages}}元</text>
                </view>
              </view>
              
              <view  class="table-item-bottom">
                <text wx:if="{{item.startTime}}" decode='true'>始：{{item.startTime}}&nbsp;&nbsp;</text>
                <text style="color:red;" wx:else="{{item.startTime}}">未开始</text>
                <text wx:if="{{item.endTime}}" decode='true'>&nbsp;&nbsp;完：{{item.endTime}}</text>
              </view>
             
          </view>

        </scroll-view>
      </view>

      
      <!-- 按负责人查看 -->
      <view wx:if="{{currentTab == 1}}">
        <!-- table header -->
        <view class="table-header">
          <text>负责人</text>
          <text>项目名</text>
          <text>项目数</text>
        </view>
        <!-- table body -->
        <scroll-view class="table-body">
          
          <view class="table-item-row"  wx:for="{{results}}" wx:key="property" wx:for-item="item" wx:for-index="id">
            
            <view class="table-item-left">{{item.principal}}</view>
           
            <view class="table-item-center">
              <view wx:for="{{item.projects}}" wx:key="property" wx:for-item="project" wx:for-index="id">
                <text>{{project.name}}(</text><text wx:if="{{project.startTime}}">{{project.startTime}}</text><text style="color:red;" wx:else="{{project.startTime}}">未开始</text><text>)</text>
              </view>
            </view>
          
            <view class="table-item-right">{{item.total}}</view>
          
          </view>

        </scroll-view>
      </view>


    </view>
  </view>
</page>