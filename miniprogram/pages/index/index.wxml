<!--index.wxml-->
<component-topnav></component-topnav>  
<scroll-view  class="container">

  <!-- 便利贴开始 -->
  <view class="note">
    <view class="note-content">
      <!-- 添加项目人 -->
      <view class="note-column-add">
        <button bindtap="addProject">新增项目</button>
      </view>

      <view wx:if="{{project.id}}" class="note-content-detail"  bindtap='viewdetail'>

        <view class="note-column-name">
          <view class="note-column-name-name">{{project.name}}</view>
          <view>{{project.name}}</view>
        </view>

        <!-- 项目时间 -->
        <view class="note-column-date">
          <text wx:if="{{project.startTime}}">{{project.startTime}}<text wx:if="{{project.endTime}}"> —— {{project.endTime}}</text></text>
          <text wx:else="{{project.startTime}}">未开始</text>
          
          <text>每天均收入{{project.dailyWages}}元</text>
        </view>
        

        <view class="note-column-wages">
          <progress percent="{{project.actualTotalWages/project.expectTotalWages}}" color="#D84339" backgroundColor="#B5AEAD" border-radius="3"/> 
          <text decode='true'>已结{{project.actualTotalWages}}元 共{{project.expectTotalWages}}元</text>
        </view>
        
      </view>
    
      <view wx:else="{{project.id}}"  class="note-content-detail">暂无</view>
    </view>
  </view>
<!-- 便利贴结束 -->


  <!-- 身份切换 -->
  <view class="top-center">
  
    <view class="top-one">
      <text class="top-one-top">{{monthWages}}元</text>
      <text>本月收入</text>
    </view>
  
    <view class="top-one">
      <text class="top-one-top">{{workDays}}</text>
      <text>出勤天数</text>
    </view>

    <view class="top-one">
      <text class="top-one-top">{{extraDays}}</text>
      <text>加班天数</text>
    </view>

    <view class="top-one">
      <text class="top-one-top">{{leaveDays}}</text>
      <text>缺勤天数</text>
    </view>
  
  </view>

<!-- top结束 -->



<!-- 三种操作功能开始 -->
  <view class="functions">
    <view class="note-column-function-circle" bindtap="viewStatistics">
      <button class="defalut_btn">
        <icon class="iconfont icon-statistics"></icon>
      </button>
      <text>统计</text>
    </view>

    <view class="note-column-function-circle" bindtap='addOrUpdateLog'>
      <button class="defalut_btn" >
        <icon class="iconfont icon-edit-account"></icon>
      </button>
      <text>每日一记</text>
    </view>

    <!-- <view class="note-column-function-circle">
      <button class="defalut_btn" bindtap='bindViewMy'>
        <icon class="iconfont icon-record"></icon>
      </button>
    </view> -->

  </view>
<!-- 三种操作功能结束 -->


<!-- 空白条 -->
  <view class="blank-space">
  </view>
<!-- 空白条 -->

<view class="log">
  
  <view class="log-title">
    <view class="log-title-circle"><text decode='true'>&nbsp;&nbsp;</text></view>
    <text decode='true'>&nbsp;每日一记</text>
  </view>


  <!-- 记录开始 -->
  <view wx:if="{{results.length > 0 }}">
    <!-- 一条记录开始 -->
    <view class="log-detail" wx:for="{{results}}" wx:key="property" wx:for-item="item" wx:for-index="id">
      <!-- 日期 -->
      <view class="log-date">
        <text class="log-date-time">{{item.time}}</text>
        <text>{{item.onMonday}}</text>
      </view>

      <!-- 圆圈 -->
      <view class="log-detail-center">
        <view class="log-detail-circle"><text wx:if="{{today == item.time}}">今</text></view>
      </view>

      <!-- 详情 -->
      <view class="touch-item" data-index="{{id}}" bindtap='editLog'>
       <!-- -->
        <view class="log-detail-detail" >
          <view class="log-detail-center">
            <text class="log-detail-detail-status" style="background:{{item.id ? 'rgb(75, 194, 75)' : '#EE7600'}};" >{{item.id ? '已打卡' : '未打卡'}}</text>
          </view>
          <text class="log-detail-detail-remark">{{item.remark ? item.remark : ''}}</text>
          <text class="log-detail-detail-hour">{{item.totalHour ? item.totalHour : '0'}}小时</text>
        </view>

      </view>
    </view>
    <!-- 一条记录结束 -->
  </view>
   <!-- 记录结束 -->
 
  </view>

  <view class="button-space"></view>
</scroll-view>


<!-- 弹出框开始 -->

  <view class="mask" catchtouchmove="preventTouchMove" wx:if="{{showModal}}"></view>

  <view class="modalDlg" wx:if="{{showModal}}" catchtouchmove="preventTouchMove" >

    <view class='modalDlg-header'>
      <view  bindtap='closeModal'>
        <button class="defalut_btn top-button">
          <icon class="iconfont icon-close"></icon>
        </button>
      </view>
    </view>
<!-- 内容 -->
    <view class='modalDlg-content'>
      <view class="modalDlg-content-row">
        <view>
          <button class="defalut_btn top-button">
            <icon class="iconfont icon-principal"></icon>
          </button>
        </view>
        <view class="modalDlg-content-row-text">
          <text>负责人. {{project.principal.name}}</text>
        </view>
      </view>

      <view class="modalDlg-content-row">
        <view>
          <button class="defalut_btn top-button">
            <icon class="iconfont icon-type"></icon>
          </button>
        </view>
        <view class="modalDlg-content-row-text">
          <text>项目. {{project.name}}</text>
        </view>
      </view>

      <view class="modalDlg-content-row">
        <view>
          <button class="defalut_btn top-button">
            <icon class="iconfont icon-address"></icon>
          </button>
        </view>
        <view class="modalDlg-content-row-text">
          <text>地点. {{project.address}}</text>
        </view>
      </view>

      <view class="modalDlg-content-row">
        <view>
          <button class="defalut_btn top-button">
            <icon class="iconfont icon-time"></icon>
          </button>
        </view>
        <view class="modalDlg-content-row-text">
          <text wx:if="{{project.endTime}}">时间. {{project.startTime}} - {{project.endTime}}</text>
          <text wx:else  style="color:red;">(未开始)</text>
        </view>
      </view>

      <view class="modalDlg-content-row">
        <view>
          <button class="defalut_btn top-button">
            <icon class="iconfont icon-wages"></icon>
          </button>
        </view>
        <view class="modalDlg-content-row-text">
          <text>总工资. {{project.actualTotalWages}}元</text>
        </view>
      </view>     
    </view>
    <!-- 按钮 -->
    <view class='modalDlg-footer'>
      <view bindtap="editProject" class="editProjectBtn">
        <button class="defalut_btn">
          <icon class="iconfont icon-edit-project">  编辑</icon>
        </button>
      </view>
      <view bindtap="deletedProject" class="deletedProjectBtn">
          <button class="defalut_btn">
            <icon class="iconfont icon-delete">  删除</icon>
          </button>
      </view>
    </view>

  </view>
<!-- 弹出框结束 -->
<component-footernav current="0" wx:if="{{isLogin}}"></component-footernav>  
